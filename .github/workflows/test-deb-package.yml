# .github/workflows/test-single-pg.yml
name: Test Single PostgreSQL Version

on:
  workflow_dispatch:
    inputs:
      pg_version:
        description: 'PostgreSQL version to test'
        required: true
        default: '17'
        type: choice
        options: ['13', '14', '15', '16', '17', '18']

jobs:
  test-deb-amd64-pglinter:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Test PostgreSQL DEB amd64 image
        uses: ./.github/actions/reusable-test-deb-package
        with:
          pg_version: ${{ inputs.pg_version }}
          pglinter_version: '0.0.19'
          platform: 'linux/amd64'
          timeout: '180'
  test-deb-arm64-pglinter:
    runs-on: ubuntu-24.04-arm
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Test PostgreSQL DEB arm64 image
        uses: ./.github/actions/reusable-test-deb-package
        with:
          pg_version: ${{ inputs.pg_version }}
          pglinter_version: '0.0.19'
          platform: 'linux/arm64'
          timeout: '180'


name: "postgresql_pglinter_${PG_MAJOR_VERSION}"
arch: "x86_64"
platform: "linux"
version: "${PGLINTER_MINOR_VERSION}"
section: "default"
priority: "extra"
maintainer: "Pierre-Marie Petit <pierre-marie.petit@dalibo.com>"
description: |
  pglinter is a PostgreSQL extension that analyzes databases for potential
  issues, performance problems, and best practice violations.
homepage: "https://github.com/pmpetit/pglinter"
license: "PostgreSQL"
depends:
  - postgresql${PG_MAJOR_VERSION}-server
provides:
  - postgresql_pglinter_${PG_MAJOR_VERSION}
contents:
  # Extension control file - only the file, not the directory
  - src: "home/pmp/.pgrx/*/pgrx-install/share/postgresql/extension/pglinter.control"
    dst: "/usr/pgsql-${PG_MAJOR_VERSION}/share/extension/pglinter.control"
    file_info:
      mode: 0644
  # Extension SQL file - only the file, not the directory
  - src: "home/pmp/.pgrx/*/pgrx-install/share/postgresql/extension/pglinter--${PGLINTER_MINOR_VERSION}.sql"
    dst: "/usr/pgsql-${PG_MAJOR_VERSION}/share/extension/pglinter--${PGLINTER_MINOR_VERSION}.sql"
    file_info:
      mode: 0644
  # Library file - only the file, not the directory
  - src: "home/pmp/.pgrx/*/pgrx-install/lib/postgresql/pglinter.so"
    dst: "/usr/pgsql-${PG_MAJOR_VERSION}/lib/pglinter.so"
    file_info:
      mode: 0755
# Don't specify directories to avoid conflicts - let the PostgreSQL package own them
